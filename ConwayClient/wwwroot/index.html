<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Conway's Game of Life</title>
    <base href="/" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link href="/css/app.css" rel="stylesheet" />

    <link href="ConwayClient.styles.css" rel="stylesheet" />
</head>

<body>
    <div id="app">
        <div id="loading-container">
            <div>
                <h1>Conway's Game of Life</h1>
                <div id="loading-square"></div>
                <h3>Loading...</h3>
            </div>
        </div>
    </div>

    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="" class="reload">Reload</a>
        <a class="dismiss">ðŸ—™</a>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="/_content/Blazor.Extensions.Canvas/blazor.extensions.canvas.js"></script>
    <script src="/_framework/blazor.webassembly.js"></script>

    <script>
        window.addCanvasClickListener = (dotnetHelper) => {
            const canvas = document.querySelector('canvas');
            if (canvas) {
                canvas.addEventListener('click', (event) => {
                    const rect = canvas.getBoundingClientRect();
                    const x = event.clientX - rect.left;
                    const y = event.clientY - rect.top;
                    console.log('{From JS Listner} x:', x, 'y:', y);
                    dotnetHelper.invokeMethodAsync('CanvasClicked', x, y);
                });
            }
        };
    </script>

</body>

</html>
